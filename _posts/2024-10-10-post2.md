---1
date: 20
title: PRACTICA 024-10-11 00:00:00 -05:00
categories: [Made]
tags: [Made, GitHub]  # TAG names should always be lowercase
---

## Reconnaissance

En esta sección, describiremos la etapa de reconocimiento en un pentest o análisis de seguridad.  El reconocimiento es crucial para recopilar información sobre el objetivo antes de realizar cualquier otra acción.  Un buen reconocimiento permite identificar vulnerabilidades y planificar el ataque de manera efectiva.

### Preguntas sobre Nmap y TCP Handshake

1. ¿Por qué debemos ejecutar nmap con privilegios de root?

2. ¿Qué significan los flags `-sS`, `-sT`, `-sV`, `-O` en el escaneo de nmap?

3. ¿Existe algún flag que permite hacer un escaneo involucrando todos los flags mencionados anteriormente?  (No, no hay un solo flag que combine todos esos.  Se deben usar individualmente.)

4. Explicar el proceso de un handshake TCP.

5. Según la pregunta anterior, ¿qué significa el flag `-sS`?

6. ¿Qué hace el flag `--script`?

### Respuestas

1. Nmap necesita privilegios de root para realizar ciertas operaciones, como enviar paquetes raw y acceder a puertos privilegiados.  Sin privilegios de root, el escaneo será limitado y no podrá obtener toda la información.

2. * `-sS`: SYN scan (stealth scan).  Envía un paquete SYN y analiza la respuesta para determinar el estado del puerto.
   * `-sT`: TCP connect scan.  Realiza una conexión TCP completa.  Más detectable que el SYN scan.
   * `-sV`: Version detection.  Intenta determinar la versión del servicio que se ejecuta en el puerto.
   * `-O`: OS detection.  Intenta determinar el sistema operativo del objetivo.

3. No existe un único flag que combine todas las opciones mencionadas.  Debes usar cada flag individualmente en el comando nmap.

4. El handshake TCP es un proceso de tres pasos para establecer una conexión:
    * **SYN:** El cliente envía un paquete SYN (synchronize) al servidor.
    * **SYN-ACK:** El servidor responde con un paquete SYN-ACK (synchronize-acknowledge).
    * **ACK:** El cliente envía un paquete ACK (acknowledge) para confirmar la conexión.

5. El flag `-sS` realiza un SYN scan, que aprovecha el proceso de handshake TCP.  Solo envía el paquete SYN inicial y analiza la respuesta, sin completar la conexión. Esto lo hace más sigiloso.

6. El flag `--script` permite ejecutar scripts NSE (Nmap Scripting Engine).  Estos scripts amplían las funcionalidades de nmap, permitiendo realizar tareas como detección de vulnerabilidades, detección de versiones de software, etc.

## Weaponization: Del Reconocimiento a la Explotación

La fase de "Weaponization" en un ataque cibernético se refiere a la creación de una herramienta o payload que explota una vulnerabilidad previamente identificada.  En este contexto, analizaremos dos scripts de Metasploit que, si bien son herramientas legítimas para pruebas de penetración, pueden ser weaponizadas para fines maliciosos.  Es crucial entender su funcionamiento para fortalecer las defensas.

## Enumeración de Usuarios SSH (auxiliary/scanner/ssh/ssh_enumusers)

Este script se utiliza para enumerar usuarios en un servidor SSH. Este paso es crucial en la fase de reconocimiento, proporcionando información valiosa para etapas posteriores del ataque.

**¿En qué lenguaje de programación está hecho?**

El script `ssh_enumusers` está escrito en **Ruby**.

**Código y explicación:**

(Pega aquí el código del script `auxiliary/scanner/ssh/ssh_enumusers`.  Recuerda que necesito que proporciones el código).

```ruby
\# (Pega aquí el código del script ssh_enumusers)
\# (Pega aquí el código del script ssh_login)

Recuerda reemplazar los comentarios  `# (Pega aquí el código del script ...)` con el código real.  Este blog post ahora incluye el concepto de "weaponization" y cómo se relaciona con los scripts de Metasploit.

## Delivery/Exploitation: La Fase Crítica de un Ataque

Las etapas de Delivery y Exploitation son el núcleo de un ataque cibernético.  Representan el momento en que la amenaza se materializa, pasando de la planificación a la ejecución.  **Delivery** se centra en cómo se entrega el payload malicioso al objetivo, mientras que **Exploitation** se refiere a la ejecución del payload para aprovechar una vulnerabilidad y obtener acceso no autorizado.

### Delivery: El Arte del Engaño

El éxito de un ataque depende en gran medida de la efectividad de la entrega del payload.  Los atacantes emplean diversas técnicas, a menudo combinadas, para maximizar sus posibilidades de éxito.  Algunos métodos comunes incluyen:

* **Phishing:**  Engañar al usuario para que abra un archivo malicioso o haga clic en un enlace que lo descargue.  Suele utilizar correos electrónicos, mensajes instantáneos o sitios web falsos.
* **Ingeniería Social:** Manipular psicológicamente a las víctimas para que realicen acciones que comprometan la seguridad, como revelar contraseñas o descargar malware.
* **Watering Hole Attacks:** Comprometer sitios web que el objetivo visita con frecuencia, infectándolos con malware que se descarga automáticamente al acceder.
* **Explotación de Vulnerabilidades de Software:** Aprovechar vulnerabilidades en software, como navegadores web o plugins, para ejecutar código malicioso sin interacción del usuario (drive-by downloads).
* **Malvertising:** Inyectar anuncios maliciosos en redes publicitarias legítimas, redirigiendo a los usuarios a sitios web maliciosos o descargando malware.

### Exploitation: Aprovechando las Debilidades

Una vez entregado el payload, la fase de Exploitation se centra en aprovechar una o varias vulnerabilidades en el sistema objetivo.  Esto puede implicar:

* **Ejecución de Código Remoto:**  Tomar el control del sistema objetivo ejecutando código arbitrario.
* **Elevación de Privilegios:** Obtener acceso a recursos restringidos, a menudo después de la ejecución de código remoto, para obtener control total del sistema.
* **Denegación de Servicio (DoS):**  Interrumpir el funcionamiento normal de un sistema o servicio, haciéndolo inaccesible a los usuarios legítimos.
* **Exfiltración de Datos:**  Robar información confidencial del sistema objetivo, como datos financieros, propiedad intelectual o información personal.

### Mitigación

Protegerse contra estas etapas cruciales de un ataque requiere una estrategia de defensa multicapa:

* **Firewall:** Bloquear el tráfico malicioso.
* **Sistemas de Detección de Intrusos (IDS) y Prevención de Intrusos (IPS):**  Identificar y bloquear actividades sospechosas.
* **Software Antivirus y Antimalware:** Detectar y eliminar malware.
* **Análisis de Vulnerabilidades:** Identificar y corregir vulnerabilidades en el software y los sistemas.
* **Formación en Seguridad:** Educar a los usuarios sobre las tácticas de phishing y la ingeniería social.
* **Actualizaciones de Software:** Aplicar parches de seguridad regularmente.

Comprender las etapas de Delivery y Exploitation es fundamental para construir una defensa sólida y protegerse contra las amenazas cibernéticas.  La combinación de tecnología y formación es esencial para mitigar los riesgos y mantener la seguridad.

## Installation: La Etapa de Implantación del Malware

La etapa de *Installation* en el ciclo de vida del malware es crucial.  Representa el momento en que el código malicioso se instala y se afianza en el sistema de la víctima.  Este proceso puede variar significativamente dependiendo del tipo de malware, desde una simple copia de archivos hasta complejas modificaciones del sistema.

### Resumen de la Instalación de Malware

El malware puede infiltrarse en un sistema a través de diversas técnicas, como phishing, ingeniería social, vulnerabilidades de software o descargas ocultas. Una vez dentro, el proceso de instalación generalmente implica los siguientes pasos:

1. **Persistencia:** El malware busca mecanismos para asegurar su ejecución incluso después de reiniciar el sistema.  Esto puede incluir la creación de entradas en el registro, la modificación de archivos de inicio o la creación de tareas programadas.
2. **Ocultación:**  El malware intenta ocultarse de la detección del usuario y del software de seguridad.  Puede utilizar técnicas como el enmascaramiento de archivos, la ofuscación de código o la inyección en procesos legítimos.
3. **Payload:**  El malware ejecuta su payload, que es la parte del código que realiza la acción maliciosa.  Este payload puede variar desde el robo de información hasta el cifrado de archivos o el control remoto del sistema.

###  vssown.vbs (Según el video de YouTube: https://www.youtube.com/watch?v=ant3ir9cRME)

*(Aquí deberías incluir un resumen del video de YouTube que describes.  Dado que no puedo acceder al video, no puedo proporcionarte esta información.  Describe qué es vssown.vbs, cómo funciona y cómo se utiliza para recuperar hashes, según lo explicado en el video.)*

### Recuperación de Hashes con vssown.vbs (Según link1 y link2)

*(En esta sección, explica cómo se utiliza vssown.vbs para recuperar hashes, basándote en la información de los enlaces "link1" y "link2".  Describe el proceso paso a paso y cualquier requisito o consideración especial.)*

### Explicación del Código de vssown.vbs (Según el enlace proporcionado)

*(Aquí, proporciona una explicación detallada del código de vssown.vbs.  Analiza las diferentes partes del script y explica su funcionalidad.  Si el enlace proporciona el código fuente, inclúyelo aquí dentro de un bloque de código, asegurándote de escapar el símbolo '#' correctamente.)*

```vbscript
' (Pega aquí el código de vssown.vbs)

Recuerda reemplazar las secciones entre `*()` con la información relevante del video y los enlaces.  Este formato te proporciona una estructura sólida para tu blog, integrando la información del video y los enlaces que mencionaste.
